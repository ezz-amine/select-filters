/*
	select-filters.js v0.9 **http://select-filters.projet.cc
	jQuery plugin that allow you to link a text input with a select tag, and use the input to filter options

	Copyright (c) 2014 Ezzayer Amine **http://www.ezzayer.me
	MIT license **https://raw.github.com/ezz-amine/select-filters/master/LICENSE

 */
$.fn.selectFilters=function(e,t,n){function u(e,t){if(!r.is("input:text")){console.log("$.selectFilters work only with text input.");return false}i=r.data("target");if(typeof i==="undefined"){console.log("$.selectFilters need a data-target attribut pointing to a select tag.");return false}i=$(i);if(!i.is("select")){console.log("$.selectFilters need a select tag, a none select tag giving.");return false}l(e);t()}function a(){param=r.data("param");i.find("option").each(function(){e=$(this);val=e.text().trim();e.attr("data-value",val)});r.data("options",i.find("option"));r.data("filtered",false);r.on(param.on,d)}function f(e,t,n){if(typeof e==="string"){if(e=="option")return c(t,n);if(e=="reload")return h()}return r.data("param")}function l(e){o=$.extend({},s);e=typeof e==="undefined"?{}:e;if(r.data("selectMin")!=null)o.min=r.data("selectMin");if(r.data("selectOn")!=null)o.on=r.data("selectOn");if(r.data("selectMultipleWordActive")!=null)o.multipleWord.active=r.data("selectMultipleWordActive");if(r.data("selectMultipleWordMethod")!=null)o.multipleWord.method=r.data("selectMultipleWordMethod");if(r.data("selectAccentFolding")!=null)o.accentFolding=r.data("selectAccentFolding");o=$.extend(o,e);r.data("param",o)}function c(e,t){if(typeof e!=="undefined"){param=r.data("param");if(typeof t==="undefined"){return param["p"]}else{param["p"]=t}}return r.data("param")}function h(){u(false,function(){i.find("option:not([data-value])").each(function(){e=$(this);val=e.text().trim();e.attr("data-value",val)});r.data("options",i.find("option"))});return r.data("param")}function p(e){param=r.data("param");return param.accentFolding?removeDiacritics(e):e}function d(t){param=r.data("param");if(param.min<=$(this).val().length){i.empty();r.data("filtered",true);r.data("options").filter(function(){e=$(this);if(param.multipleWord.active){words=r.val().split(" ");var t=param.multipleWord.method=="and";$.each(words,function(n,r){if(param.multipleWord.method=="and"){t=t&&p(e.data("value")).toLowerCase().indexOf(p(r).toLowerCase())!=-1}else{t=t||p(e.data("value")).toLowerCase().indexOf(p(r).toLowerCase())!=-1}});return t}else{return p(e.data("value")).toLowerCase().indexOf(p(r.val()).toLowerCase())!=-1}}).appendTo(i)}else{if(r.data("filtered")){r.data("options").appendTo(i);r.data("filtered",false)}}}if($(this).length>1){$(this).each(function(){$(this).selectFilters(e,t,n)});return false}var r=$(this[0]);var i=null;var s={min:3,on:"keyup",multipleWord:{active:false,method:"and"},accentFolding:true};var o=null;u(f(e,t,n),a);return r}
